{
	"nodes":[
		{"id":"775c5e3329763db5","type":"text","text":"","x":2174,"y":2218,"width":250,"height":60},
		{"id":"c09fa6a07e3bf99f","type":"text","text":"```mermaid\n%%{init: {'theme': 'base', 'flowchart': { 'useMaxWidth': false, 'width': '100%', 'htmlLabels': true }}}%%\nflowchart TD\n    subgraph \"ETL PROFESIONAL - ARQUITECTURA COMPLETA\"\n        direction TB\n        \n        subgraph \"1. INGESTION LAYER\"\n            direction LR\n            FW[ğŸ“‚ File Watcher<br/>Monitorea carpeta de entrada<br/>Detecta archivos nuevos]\n            FV[ğŸ“‹ File Validator<br/>Verifica integridad<br/>Valida encoding<br/>Detecta tipo de log]\n            CM[ğŸ’¾ Checkpoint Manager<br/>Guarda Ãºltimo archivo procesado<br/>Evita reprocesar datos]\n        end\n        \n        subgraph \"2. PARSING LAYER\"\n            direction LR\n            PF[ğŸ”§ Parser Factory<br/>Detecta formato automÃ¡ticamente<br/>Crea parser apropiado]\n            AP[ğŸ“ Apache Parser<br/>Regex optimizado<br/>Extrae campos]\n            NP[ğŸ“ Nginx Parser<br/>Soporta variables custom]\n            BR[âš¡ Batch Reader<br/>Lee archivos en chunks<br/>Memory-efficient]\n        end\n        \n        subgraph \"3. VALIDATION LAYER\"\n            direction LR\n            IPV[ğŸ” IP Validator<br/>Valida IPv4/IPv6<br/>Detecta IPs privadas]\n            TIV[ğŸ• Timestamp Validator<br/>Valida formato fecha<br/>Normaliza a UTC]\n            UV[ğŸŒ URL Validator<br/>Valida formato URL<br/>Detecta patrones maliciosos]\n            HV[ğŸ“Š HTTP Validator<br/>Valida mÃ©todos HTTP<br/>Verifica status codes]\n            BRV[ğŸ¯ Business Rules Validator<br/>Reglas custom del negocio]\n        end\n        \n        subgraph \"4. ENRICHMENT LAYER\"\n            direction LR\n            GE[ğŸŒ Geo-IP Enricher<br/>GeolocalizaciÃ³n de IPs<br/>ISP detection]\n            UE[ğŸ–¥ï¸ User-Agent Enricher<br/>Parseo de User-Agent<br/>Detecta bots vs humanos]\n            TE[ğŸ›¡ï¸ Threat Intelligence Enricher<br/>Consulta blacklists<br/>Threat score]\n            SE[ğŸ”— Session Enricher<br/>Agrupa requests por sesiÃ³n<br/>Tracking user journey]\n        end\n        \n        subgraph \"5. TRANSFORMATION LAYER\"\n            direction LR\n            DN[ğŸ”„ Data Normalizer<br/>Lowercase de URLs<br/>NormalizaciÃ³n timestamps]\n            AN[ğŸ­ Anonymizer<br/>AnonimizaciÃ³n de IPs<br/>PII detection y masking]\n            AG[ğŸ”¢ Aggregator<br/>Pre-calcula mÃ©tricas<br/>Hourly/Daily rollups]\n        end\n        \n        subgraph \"6. DEDUPLICATION LAYER\"\n            direction TB\n            HD[ğŸ¯ Hash-based Deduplicator<br/>Genera hash de cada registro<br/>Redis cache]\n            TD[â±ï¸ Time-window Deduplicator<br/>Detecta duplicados en ventana<br/>Configurable threshold]\n        end\n        \n        subgraph \"7. STORAGE LAYER\"\n            direction LR\n            PW[ğŸ—„ï¸ PostgreSQL Writer<br/>Bulk inserts<br/>Transacciones ACID]\n            TP[ğŸ’¾ Table Partitioning<br/>Particionado por fecha<br/>Automatic partition creation]\n            MM[ğŸ”„ Migration Manager<br/>Schema versioning<br/>Zero-downtime deployments]\n            RC[ğŸ’¿ Redis Cache<br/>Cache de lookups frecuentes<br/>Session storage]\n        end\n        \n        subgraph \"8. PROCESSING ORCHESTRATION\"\n            direction LR\n            PO[ğŸ¼ Pipeline Orchestrator<br/>Coordina pasos del ETL<br/>Error handling centralizado]\n            PP[âš¡ Parallel Processor<br/>Multiprocessing pool<br/>Worker auto-scaling]\n            BM[ğŸ“¦ Batch Manager<br/>Agrupa registros en batches<br/>Dynamic batch sizing]\n            RM[ğŸ”„ Retry Manager<br/>Exponential backoff<br/>Dead Letter Queue]\n        end\n        \n        subgraph \"9. MONITORING & OBSERVABILITY\"\n            direction TB\n            MC[ğŸ“Š Metrics Collector<br/>Prometheus metrics<br/>Processing latency]\n            SL[ğŸ“ Structured Logging<br/>JSON structured logs<br/>Centralized logging]\n            HC[ğŸ¥ Health Checker<br/>Database connectivity check<br/>Disk space check]\n            AS[ğŸš¨ Alerting System<br/>Error rate threshold alerts<br/>Slack webhooks]\n            DQ[ğŸ“ˆ Data Quality Monitor<br/>Data quality score<br/>Anomaly detection]\n        end\n        \n        subgraph \"10. ERROR HANDLING & RECOVERY\"\n            direction LR\n            EC[âŒ Error Classifier<br/>Classifica errores<br/>Parsing vs Validation errors]\n            DLQ[ğŸ“« Dead Letter Queue<br/>Almacena registros fallidos<br/>Permite reprocessing]\n            CB[ğŸ”„ Circuit Breaker<br/>Previene cascading failures<br/>Auto-recovery]\n            CR[ğŸ’¾ Crash Recovery<br/>Guarda estado en checkpoints<br/>Graceful shutdown]\n        end\n        \n        subgraph \"11. API & CONTROL PLANE\"\n            direction TB\n            API[ğŸš€ FastAPI REST API<br/>/api/v1/etl/start<br/>/api/v1/etl/status<br/>/api/v1/health]\n            AA[ğŸ” Authentication & Authorization<br/>API Key authentication<br/>Rate limiting]\n        end\n        \n        subgraph \"12. CONFIGURATION & DEPLOYMENT\"\n            direction LR\n            CFG[âš™ï¸ Configuration Management<br/>YAML config files<br/>Hot-reload de configs]\n            DOCK[ğŸ³ Containerization<br/>Dockerfile optimizado<br/>Multi-stage builds]\n            DEP[ğŸ“¦ Dependency Management<br/>requirements.txt<br/>Lockfiles]\n        end\n        \n        %% FLUJO PRINCIPAL\n        FW --> FV --> CM --> PF\n        PF --> AP & NP --> BR\n        \n        BR --> IPV & TIV & UV & HV & BRV\n        \n        IPV --> GE\n        TIV --> DN\n        UV --> UE\n        HV --> TE\n        BRV --> SE\n        \n        GE --> DN\n        UE --> AN\n        TE --> AG\n        SE --> DN\n        \n        DN --> HD\n        AN --> TD\n        AG --> HD\n        \n        HD --> PW\n        TD --> PW\n        \n        PW --> TP --> MM\n        RC -.-> PW\n        \n        PO --> PP --> BM --> RM\n        \n        RM --> MC\n        MC --> SL --> HC --> AS --> DQ\n        \n        EC --> DLQ --> CB --> CR\n        CR -.-> PO\n        \n        API --> AA\n        AA -.-> PO\n        \n        CFG --> DOCK --> DEP\n        DEP -.-> API\n    end\n    \n ```\n ","x":-200,"y":-902,"width":2504,"height":3460}
	],
	"edges":[]
}